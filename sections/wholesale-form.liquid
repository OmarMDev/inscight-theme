{{ 'section-wholesale-inquiry-form.css' | asset_url | stylesheet_tag }}
<script src="{{ 'wholesale-inquiry-form.js' | asset_url }}" defer="defer"></script>

<wholesale-inquiry-form
  class="wholesale-inquiry-form"
  data-create-shopify-customer="{{ section.settings.create_shopify_customer }}"
>
  <div class="page-width">
    {% if section.settings.heading != blank %}
      <h2 class="wholesale-inquiry-form__heading">
        {{ section.settings.heading }}
      </h2>
    {% endif %}

    <div
      class="wholesale-inquiry-form__container"
      style="background-color: {{ section.settings.box_background_color }};"
    >
      {% if section.settings.subheading != blank %}
        <p class="wholesale-inquiry-form__subheading">
          {{ section.settings.subheading }}
        </p>
      {% endif %}

      <div class="wholesale-inquiry-form__form-wrapper">
        {%- comment -%} Success message (initially hidden, shown by JS after successful submission) {%- endcomment -%}
        <div class="wholesale-inquiry-form__success" style="display: none;">
          <p>{{ section.settings.success_message }}</p>
        </div>

        {%- comment -%} Error message container (initially hidden, shown by JS if submission fails) {%- endcomment -%}
        <div class="wholesale-inquiry-form__errors" style="display: none;"></div>

        {%- comment -%} Mailchimp form with AJAX submission {%- endcomment -%}
        {%- if section.settings.mailchimp_user_id != blank and section.settings.mailchimp_list_id != blank -%}
          <form
            action="https://{{ section.settings.mailchimp_domain }}.list-manage.com/subscribe/post"
            method="post"
            class="wholesale-inquiry-form__mailchimp-form"
            novalidate
          >
            {%- comment -%} Mailchimp hidden fields {%- endcomment -%}
            <input type="hidden" name="u" value="{{ section.settings.mailchimp_user_id }}">
            <input type="hidden" name="id" value="{{ section.settings.mailchimp_list_id }}">
            
            {%- comment -%} Bot prevention field (honeypot) {%- endcomment -%}
            <div style="position: absolute; left: -5000px;" aria-hidden="true">
              <input type="text" name="b_{{ section.settings.mailchimp_user_id }}_{{ section.settings.mailchimp_list_id }}" tabindex="-1" value="">
            </div>

            {%- comment -%} Add tag to Mailchimp if tags are enabled {%- endcomment -%}
            {%- if section.settings.add_mailchimp_tag -%}
              <input type="hidden" name="TAGS" value="wholesale-inquiry">
            {%- endif -%}

            <div class="wholesale-inquiry-form__fields">
              <div class="wholesale-inquiry-form__field">
                <label for="mce-FNAME" class="visually-hidden">Your name</label>
                <input
                  type="text"
                  id="mce-FNAME"
                  name="FNAME"
                  placeholder="Your name"
                  required
                >
              </div>

              <div class="wholesale-inquiry-form__field">
                <label for="mce-EMAIL" class="visually-hidden">Email address</label>
                <input
                  type="email"
                  id="mce-EMAIL"
                  name="EMAIL"
                  placeholder="Email address"
                  required
                >
              </div>

              <div class="wholesale-inquiry-form__field">
                <label for="mce-PHONE" class="visually-hidden">Phone number</label>
                <input
                  type="tel"
                  id="mce-PHONE"
                  name="PHONE"
                  placeholder="Phone number"
                >
              </div>

              <div class="wholesale-inquiry-form__field">
                <label for="mce-COMPANY" class="visually-hidden">Company name</label>
                <input
                  type="text"
                  id="mce-COMPANY"
                  name="COMPANY"
                  placeholder="Company name"
                >
              </div>
            </div>

            <div class="wholesale-inquiry-form__submit">
              <button type="submit" class="wholesale-inquiry-form__button">
                {{ section.settings.button_text }}
              </button>
            </div>
          </form>
        {%- else -%}
          <div class="wholesale-inquiry-form__setup-message">
            <p><strong>Setup Required:</strong> Please configure your Mailchimp settings in the theme editor to enable this form.</p>
          </div>
        {%- endif -%}
      </div>
    </div>
  </div>
</wholesale-inquiry-form>

{% schema %}
{
  "name": "Wholesale Inquiry Form",
  "settings": [
    {
      "type": "header",
      "content": "Form Content"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "REQUEST DECK & PRICING"
    },
    {
      "type": "textarea",
      "id": "subheading",
      "label": "Subheading",
      "default": "Please complete the form below to receive our Pair Beautifully™ deck and pricing."
    },
    {
      "type": "text",
      "id": "button_text",
      "label": "Button text",
      "default": "Request wholesale deck & pricing"
    },
    {
      "type": "textarea",
      "id": "success_message",
      "label": "Success message",
      "default": "Thank you for your inquiry! We'll be in touch soon with our wholesale information."
    },
    {
      "type": "header",
      "content": "Mailchimp Integration",
      "info": "Configure your Mailchimp settings to enable automated email sending"
    },
    {
      "type": "text",
      "id": "mailchimp_user_id",
      "label": "Mailchimp User ID",
      "info": "Find this in your Mailchimp form embed code (the 'u' parameter). Example: 1a2b3c4d5e6f7g8h9i0j1k"
    },
    {
      "type": "text",
      "id": "mailchimp_list_id",
      "label": "Mailchimp List/Audience ID",
      "info": "Find this in your Mailchimp form embed code (the 'id' parameter). Example: a1b2c3d4e5"
    },
    {
      "type": "text",
      "id": "mailchimp_domain",
      "label": "Mailchimp Data Center",
      "info": "Usually something like 'us1', 'us2', 'us21', etc. Find this in your Mailchimp account URL or form code",
      "default": "us1"
    },
    {
      "type": "checkbox",
      "id": "add_mailchimp_tag",
      "label": "Add 'wholesale-inquiry' tag in Mailchimp",
      "info": "Tags must be enabled in your Mailchimp audience settings",
      "default": true
    },
    {
      "type": "paragraph",
      "content": "**How to find your Mailchimp IDs:** Go to Mailchimp → Audience → Signup forms → Embedded forms. Look for the form action URL like: list-manage.com/subscribe/post?u=USER_ID&id=LIST_ID"
    },
    {
      "type": "header",
      "content": "Advanced Options"
    },
    {
      "type": "checkbox",
      "id": "create_shopify_customer",
      "label": "Also create Shopify customer contact",
      "info": "Enable this to create a customer in Shopify in addition to adding to Mailchimp",
      "default": false
    },
    {
      "type": "header",
      "content": "Styling"
    },
    {
      "type": "color",
      "id": "box_background_color",
      "label": "Box background color",
      "default": "#F1E4D6"
    },
    {
      "type": "range",
      "id": "padding_top",
      "label": "Padding top",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "default": 80
    },
    {
      "type": "range",
      "id": "padding_bottom",
      "label": "Padding bottom",
      "min": 0,
      "max": 200,
      "step": 10,
      "unit": "px",
      "default": 80
    }
  ],
  "presets": [
    {
      "name": "Wholesale Inquiry Form"
    }
  ]
}
{% endschema %}
